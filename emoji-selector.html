

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-styles/paper-styles.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../iron-icons/iron-icons.html">

<link rel="import" href="../paper-input/paper-input-addon-behavior.html">

<!--
`emoji-selector` is a component that lets you select an emoji and insert it.

    <paper-input id="in"></paper-input>
    <emoji-selector target="in"></emoji-selector>
-->

<dom-module id="emoji-selector">
  <link rel="import" type="css" href="emoji-selector.css">

  <style>

    :host {
      display: inline;

      /* lol halp */
      position: relative;
      z-index: 10;
      float: right;
      right: -35px;
      top: -35px
    }

  </style>

  <template>
    <paper-icon-button icon="face"on-click="_onClick"></paper-icon-button>
  </template>

</dom-module>


<script>
  Polymer({

    is: 'emoji-selector',

    behaviors: [
      Polymer.PaperInputAddonBehavior
    ],

    properties: {

      _charCounterStr: {
        type: String,
        value: '0'
      }

    },

    _onClick: function() {
      console.log("adsfasdf");
      if (!this._element) {
        return;
      }

      var text = ".";

      // Preserve the cursor position.

      var value = this._element.value;
      var start = this._element.selectionStart;
      var end = this._element.selectionEnd;

      var front = (value).substring(0, start);
      var back = (value).substring(end, value.length);

      this._element.value = front + text + back;
      this._element.selectionStart = start + text.length;
      this._element.selectionEnd = start + text.length;

      this._element.focus();

    },

    update: function(state) {
      this._element = state.inputElement;
      console.log("update");

    //   if (!state.inputElement) {
    //     return;
    //   }
    //
    //   state.value = state.value || '';
    //
    //   // Account for the textarea's new lines.
    //   var str = state.value.replace(/(\r\n|\n|\r)/g, '--').length;
    //
    //   if (state.inputElement.hasAttribute('maxlength')) {
    //     str += '/' + state.inputElement.getAttribute('maxlength');
    //   }
    //   this._charCounterStr = str;
    }

  });

</script>
